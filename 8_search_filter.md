# 🔸 8. 검색과 필터링 (Search & Filter)

## ■ 8.1 개념 정의

-  배열 내에서 원하는 조건을 만족하는 값, 인덱스를 검색하거나 필터링하는 기능입니다.

✔️ NumPy는 벡터화 연산 기반으로 매우 빠른 검색/필터 기능을 제공합니다.

### 📌 값 검색

```
arr = np.array([10, 20, 30, 40, 50])
indices = np.where(arr > 30)  # (array([3,4]),)
```

### 📌 조건 필터링

```
arr = np.array([41, 42, 43, 44])
filtered = arr[arr > 42]  # → [43 44]
```

---

## 🔍 8.2 이론적 배경

-  검색은 불리언 마스킹 또는 조건문을 통해 이루어짐

-  메모리 상 stride와 논리적 인덱스를 활용해 최적화됨

✔️ 반복문 없이 벡터화 연산으로 실행 → 속도 비약적 향상

---

## 🔁 8.3 동작 원리

-  불리언 마스킹: ```(arr > 5)```

-  조건 검색: ```np.where(), np.nonzero()```

-  고유값 및 포함 여부: ```np.unique(), np.isin()```

---

## 🔍 8.4 수학적 원리 및 메모리 구조

| 함수           | 반환값          | 설명              |
| ------------ | ------------ | --------------- |
| np.where()   | 인덱스 또는 조건 선택 | 조건 만족 인덱스 반환    |
| np.nonzero() | 인덱스          | 0이 아닌 값의 인덱스 반환 |
| np.isin()    | 불리언 배열       | 특정 값 포함 여부 판별   |
| np.unique()  | 고유값 배열       | 중복 제거 후 정렬 반환   |

✔️ 내부적으로는 stride와 인덱스 매핑을 활용

---

## ■ 8.5 활용 사례

-  데이터셋 결측값 처리

-  특정 범위 값 필터링

-  라벨 데이터 확인 및 중복 제거

-  마스킹 기반 조건 연산

---
## 🚀 8.6 코드 예시

```
import numpy as np

arr = np.array([1, 2, 3, 4, 5, 6, 7])

# 조건 검색
idx = np.where(arr > 4)

# 포함 여부
mask = np.isin(arr, [2, 5, 9])

# 고유값
unique = np.unique([1, 2, 2, 3, 4, 4])

print("조건 검색 인덱스:", idx)
print("포함 여부 마스크:", mask)
print("고유값:", unique)
```

---

## 🚀 8.7 출력 예시

```
조건 검색 인덱스: (array([4, 5, 6]),)
포함 여부 마스크: [False  True False False  True False False]
고유값: [1 2 3 4]
```

---

## 🚩 8.8 주의사항 및 한계

✔️where와 nonzero는 대규모 배열에서 메모리 부하 가능

✔️isin은 리스트가 클 경우 성능 저하 발생

✔️unique는 자동 정렬됨 → 순서 유지가 필요하면 pandas 사용 권장


## 🚀 활용도
- 이상치 탐색
- 조건 기반 피처 선택
